<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì‹¤ì „ëª¨ì˜ê³ ì‚¬ ì ìˆ˜ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body { font-family: Arial; background:#f4f6f9; margin:0; padding:20px; }
.container { max-width:1100px; margin:auto; background:white; padding:20px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1);} 
h1{text-align:center;}
input,select,button{padding:10px;margin:5px 0;width:100%;box-sizing:border-box;}
button{background:#4CAF50;color:white;border:none;border-radius:6px;cursor:pointer;}
button:hover{background:#45a049;}
table{width:100%;margin-top:20px;border-collapse:collapse;}
th,td{border:1px solid #ddd;padding:8px;text-align:center;}
th{background:#f2f2f2;}
.hidden{display:none;}
.section{background:#eef2ff;padding:15px;margin-top:20px;border-radius:8px;}
.type-item{display:flex;justify-content:space-between;margin:5px 0;}
.small-btn{width:auto;padding:5px 10px;background:#e74c3c;}
</style>
</head>
<body>

<div id="loginPage" class="container">
<h1>ğŸ” ë¡œê·¸ì¸</h1>
<input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥">
<button onclick="login()">ë¡œê·¸ì¸</button>
</div>

<div id="mainPage" class="container hidden">
<h1>ğŸ“Š ì‹¤ì „ëª¨ì˜ê³ ì‚¬ ì ìˆ˜ ê´€ë¦¬</h1>

<div class="section">
<h3>ğŸ“š ëª¨ì˜ê³ ì‚¬ ì¢…ë¥˜ ê´€ë¦¬</h3>
<input type="text" id="newType" placeholder="ìƒˆ ëª¨ì˜ê³ ì‚¬ ì¢…ë¥˜ ì¶”ê°€">
<button onclick="addType()">ì¢…ë¥˜ ì¶”ê°€</button>
<div id="typeList"></div>
</div>

<div class="section">
<h3>âœ ì ìˆ˜ ì…ë ¥</h3>
<select id="examType"></select>
<input type="number" id="round" placeholder="íšŒì°¨ ì…ë ¥ (ì˜ˆ: 1, 2, 3)">
<input type="number" id="korean" placeholder="êµ­ì–´ ì ìˆ˜">
<input type="number" id="math" placeholder="ìˆ˜í•™ ì ìˆ˜">
<input type="number" id="english" placeholder="ì˜ì–´ ì ìˆ˜">
<input type="number" id="percentile" placeholder="ë°±ë¶„ìœ„ (ë‚˜ì¤‘ì— ëŒ€í•™ì¶”ì²œìš©)">
<button onclick="addScore()">ì ìˆ˜ ì¶”ê°€</button>
</div>

<div class="section">
<h3>ğŸ” ëª¨ì˜ê³ ì‚¬ ë¶„ì„ ë³´ê¸°</h3>
<select id="viewType" onchange="renderAnalysis()"></select>
<select id="viewRound" onchange="renderAnalysis()"></select>
<div id="analysisResult"></div>
</div>

<div class="section">
<h3>ğŸ« ì§€ì› ê°€ëŠ¥ ëŒ€í•™ (ë°±ë¶„ìœ„ ê¸°ì¤€)</h3>
<div id="universityResult">ë°±ë¶„ìœ„ ë°ì´í„°ë¥¼ ì…ë ¥í•˜ë©´ í‘œì‹œë©ë‹ˆë‹¤.</div>
</div>

</div>

<script>
const SITE_PASSWORD="1234";

let scores=JSON.parse(localStorage.getItem('scores'))||[];
let examTypes=JSON.parse(localStorage.getItem('examTypes'))||["í•™ë ¥í‰ê°€","ìˆ˜ëŠ¥","ì‚¬ì„¤","ì„œë°”ì´ë²Œ"];

// ë‚˜ì¤‘ì— ë„¤ê°€ ëŒ€í•™ ë¦¬ìŠ¤íŠ¸ ì£¼ë©´ ì—¬ê¸°ì— ì¶”ê°€í•˜ë©´ ë¨
let universityData={
// ì˜ˆì‹œ
// 95:["ì˜ëŒ€A","ì˜ëŒ€B"],
// 90:["ì—°ì„¸ëŒ€","ê³ ë ¤ëŒ€"],
};

function login(){
if(document.getElementById('password').value===SITE_PASSWORD){
document.getElementById('loginPage').classList.add('hidden');
document.getElementById('mainPage').classList.remove('hidden');
renderTypes();
renderAnalysisSelectors();
}else alert('ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤');
}

function saveTypes(){localStorage.setItem('examTypes',JSON.stringify(examTypes));}

function renderTypes(){
const select=document.getElementById('examType');
const viewSelect=document.getElementById('viewType');
select.innerHTML=''; viewSelect.innerHTML='';
examTypes.forEach(type=>{
let opt1=new Option(type,type);
let opt2=new Option(type,type);
select.add(opt1);
viewSelect.add(opt2);
});

const list=document.getElementById('typeList');
list.innerHTML='';
examTypes.forEach(type=>{
let div=document.createElement('div');
div.className='type-item';
div.innerHTML=`${type} <button class='small-btn' onclick="deleteType('${type}')">ì‚­ì œ</button>`;
list.appendChild(div);
});
}

function addType(){
const val=document.getElementById('newType').value.trim();
if(!val||examTypes.includes(val)) return;
examTypes.push(val);
saveTypes();
document.getElementById('newType').value='';
renderTypes();
}

function deleteType(type){
examTypes=examTypes.filter(t=>t!==type);
saveTypes();
renderTypes();
}

function addScore(){
const type=document.getElementById('examType').value;
const round=parseInt(document.getElementById('round').value);
const korean=parseInt(document.getElementById('korean').value);
const math=parseInt(document.getElementById('math').value);
const english=parseInt(document.getElementById('english').value);
const percentile=parseInt(document.getElementById('percentile').value);
if(isNaN(round)||isNaN(korean)||isNaN(math)||isNaN(english)) return;

const total=korean+math+english;
scores.push({type,round,korean,math,english,total,percentile});
localStorage.setItem('scores',JSON.stringify(scores));
renderAnalysisSelectors();
renderAnalysis();
}

function renderAnalysisSelectors(){
const type=document.getElementById('viewType').value||examTypes[0];
const rounds=[...new Set(scores.filter(s=>s.type===type).map(s=>s.round))];
const roundSelect=document.getElementById('viewRound');
roundSelect.innerHTML='';
roundSelect.add(new Option('ì „ì²´','all'));
rounds.forEach(r=>roundSelect.add(new Option(r+'íšŒì°¨',r)));
}

function renderAnalysis(){
const type=document.getElementById('viewType').value;
const round=document.getElementById('viewRound').value;
let filtered=scores.filter(s=>s.type===type);
if(round!=='all') filtered=filtered.filter(s=>s.round==round);
if(filtered.length===0){document.getElementById('analysisResult').innerHTML='ë°ì´í„° ì—†ìŒ';return;}

let avg=(filtered.reduce((a,b)=>a+b.total,0)/filtered.length).toFixed(1);
let myLatest=filtered[filtered.length-1];

let html=`<b>${type}</b><br>`;
if(round==='all') html+=`ì „ì²´ í‰ê· : ${avg}<br>`;
else html+=`${round}íšŒì°¨ í‰ê· : ${avg}<br>`;

html+=`ë‚´ ìµœê·¼ ì ìˆ˜: ${myLatest.total}<br>`;

if(myLatest.percentile){
let possible=[];
for(let p in universityData){
if(myLatest.percentile>=p) possible=possible.concat(universityData[p]);
}
document.getElementById('universityResult').innerHTML=
possible.length?possible.join('<br>'):'í•´ë‹¹ ë°±ë¶„ìœ„ ëŒ€í•™ ë°ì´í„° ì—†ìŒ';
}

document.getElementById('analysisResult').innerHTML=html;
}

</script>
</body>
</html>
